## CPU Protection Rings
- CPU도 권한 모드라는 것을 가지고 있다.
    두 가지 모드.
    - 사용자 모드 (user mode) : 응용 프로그램이 사용
    - 커널 모드 (kernel mode) : OS가 사용 -> 특권 명령어 실행과 원하는 작업 수행을 위한 자원 접근을 가능케 하는 모드

1. 1~1000 더하고 -> 사용자 영역
2. 파일에서 데이터 가져오기 -> 시스템 콜을 통해 Kernel영역
3. 해당 데이터와 1~1000더한 값을 더한다. 출력한다. -> 사용자영역

## 시스템 콜은 커널모드로 실행
- 커널 모드에서만 실행 가능한 기능들이 있음
- 커널 모드로 실행하려면, 반드시 시스템 콜을 사용해야함(거쳐야 함)
- 시스템 콜은 운영체제 제공

사용자 모드와 커널 모드
- 함부로 응용 프로그램이 전체 컴퓨터 시스템을 헤치지 못함
- 주민등록등본은 꼭 동사무소 또는 민원24시(정부 사이트)에서 특별한 신청서를 써야만, 발급하는거와 유사한 원리 (사용자 모드)
    - 동사무소 직원분들은 특별한 권한(시스템 콜)을 가지고, 주민등록등본 출력 명령을 실행.
    - 그 결과를 다시 전달해 줌. (커널모드)

- 응용 프로그래머와 시스템 프로그래머

~~~ C
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

int main()
{
    int fd:
    fd = open("datatxt".O_RDONLY):
    if(fd == -1)
    {
        printf("Error: can not open file \n"): /* 시스템 콜 커널모드 전환 -> open() 함수를 처리하는 sys_open() 커널 함수 호출 -> 
        /* 파일을 열지 못했으므로 그냥 종료 */
        return1;
    }
    else
    {
        print(*File opened and now closed_\n*);
        close(fd);
        return ();
    }
}
~~~

## 정리
- 운영체제는 `시스템 콜` 제공
- 프로그래밍 언어별로 운영체제 기능을 활용하기 위해, 시스템 콜을 기반으로 `API` 제공
- 응용 프로그램은 운영체제 기능 필요시, 해당 `API`를 사용해서 프로그램을 작성
- 응용프로그램이 실행돼서, 운영체제 기능이 필요한 `API`를 호출하면, 시스템 콜이 호출돼서, `커널 모드로 변경되어` OS 내부에서 해당 명령이 실행되고, 다시 응용 프로그램으로 돌아간다.

- 추후 시스템 프로그래밍 과목으로 연결된다.